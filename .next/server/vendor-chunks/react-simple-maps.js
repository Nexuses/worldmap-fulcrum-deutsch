"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-simple-maps";
exports.ids = ["vendor-chunks/react-simple-maps"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-simple-maps/dist/index.es.js":
/*!*********************************************************!*\
  !*** ./node_modules/react-simple-maps/dist/index.es.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Annotation: () => (/* binding */ Annotation),\n/* harmony export */   ComposableMap: () => (/* binding */ ComposableMap),\n/* harmony export */   Geographies: () => (/* binding */ Geographies),\n/* harmony export */   Geography: () => (/* binding */ Geography$1),\n/* harmony export */   Graticule: () => (/* binding */ Graticule$1),\n/* harmony export */   Line: () => (/* binding */ Line),\n/* harmony export */   Marker: () => (/* binding */ Marker),\n/* harmony export */   Sphere: () => (/* binding */ Sphere$1),\n/* harmony export */   ZoomableGroup: () => (/* binding */ ZoomableGroup),\n/* harmony export */   useGeographies: () => (/* binding */ useGeographies),\n/* harmony export */   useZoomPan: () => (/* binding */ useZoomPan)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! prop-types */ \"(ssr)/./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/equalEarth.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/mercator.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/transverseMercator.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/albers.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/albersUsa.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/azimuthalEqualArea.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/azimuthalEquidistant.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/orthographic.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/conicConformal.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/conicEqualArea.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/projection/conicEquidistant.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/path/index.js\");\n/* harmony import */ var d3_geo__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! d3-geo */ \"(ssr)/./node_modules/d3-geo/src/graticule.js\");\n/* harmony import */ var topojson_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! topojson-client */ \"(ssr)/./node_modules/topojson-client/src/index.js\");\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar MapContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)();\n\nvar projections = {\n  geoEqualEarth: d3_geo__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n  geoMercator: d3_geo__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n  geoTransverseMercator: d3_geo__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n  geoAlbers: d3_geo__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n  geoAlbersUsa: d3_geo__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n  geoAzimuthalEqualArea: d3_geo__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\n  geoAzimuthalEquidistant: d3_geo__WEBPACK_IMPORTED_MODULE_8__[\"default\"],\n  geoOrthographic: d3_geo__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\n  geoConicConformal: d3_geo__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n  geoConicEqualArea: d3_geo__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\n  geoConicEquidistant: d3_geo__WEBPACK_IMPORTED_MODULE_12__[\"default\"]\n};\n\nvar makeProjection = function makeProjection(_ref) {\n  var _ref$projectionConfig = _ref.projectionConfig,\n      projectionConfig = _ref$projectionConfig === undefined ? {} : _ref$projectionConfig,\n      _ref$projection = _ref.projection,\n      projection = _ref$projection === undefined ? \"geoEqualEarth\" : _ref$projection,\n      _ref$width = _ref.width,\n      width = _ref$width === undefined ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === undefined ? 500 : _ref$height;\n\n  var isFunc = typeof projection === \"function\";\n\n  if (isFunc) return projection;\n\n  var proj = projections[projection]().translate([width / 2, height / 2]);\n\n  var supported = [proj.center ? \"center\" : null, proj.rotate ? \"rotate\" : null, proj.scale ? \"scale\" : null, proj.parallels ? \"parallels\" : null];\n\n  supported.forEach(function (d) {\n    if (!d) return;\n    proj = proj[d](projectionConfig[d] || proj[d]());\n  });\n\n  return proj;\n};\n\nvar MapProvider = function MapProvider(_ref2) {\n  var width = _ref2.width,\n      height = _ref2.height,\n      projection = _ref2.projection,\n      projectionConfig = _ref2.projectionConfig,\n      restProps = objectWithoutProperties(_ref2, [\"width\", \"height\", \"projection\", \"projectionConfig\"]);\n\n  var c = projectionConfig.center || [];\n  var r = projectionConfig.rotate || [];\n  var p = projectionConfig.parallels || [];\n  var s = projectionConfig.scale || null;\n\n  var value = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    var proj = makeProjection({\n      projectionConfig: projectionConfig,\n      projection: projection,\n      width: width,\n      height: height\n    });\n    return {\n      width: width,\n      height: height,\n      projection: proj,\n      path: (0,d3_geo__WEBPACK_IMPORTED_MODULE_13__[\"default\"])().projection(proj)\n    };\n  }, [width, height, projection, c[0], c[1], r[0], r[1], r[2], p[0], p[1], s]);\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(MapContext.Provider, _extends({ value: value }, restProps));\n};\n\nMapProvider.propTypes = {\n  width: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  height: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  projection: prop_types__WEBPACK_IMPORTED_MODULE_14___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_14___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func)]),\n  projectionConfig: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().object)\n};\n\nvar ComposableMap = function ComposableMap(_ref) {\n  var _ref$width = _ref.width,\n      width = _ref$width === undefined ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === undefined ? 600 : _ref$height,\n      _ref$projection = _ref.projection,\n      projection = _ref$projection === undefined ? \"geoEqualEarth\" : _ref$projection,\n      _ref$projectionConfig = _ref.projectionConfig,\n      projectionConfig = _ref$projectionConfig === undefined ? {} : _ref$projectionConfig,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"width\", \"height\", \"projection\", \"projectionConfig\", \"className\"]);\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    MapProvider,\n    {\n      width: width,\n      height: height,\n      projection: projection,\n      projectionConfig: projectionConfig\n    },\n    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"svg\", _extends({\n      viewBox: \"0 0 \" + width + \" \" + height,\n      className: \"rsm-svg \" + className\n    }, restProps))\n  );\n};\n\nComposableMap.propTypes = {\n  width: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  height: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  projection: prop_types__WEBPACK_IMPORTED_MODULE_14___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_14___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func)]),\n  projectionConfig: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().object),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nfunction fetchGeographies(url) {\n  return fetch(url).then(function (res) {\n    if (!res.ok) {\n      throw Error(res.statusText);\n    }\n    return res.json();\n  }).catch(function (error) {\n    console.log(\"There was a problem when fetching the data: \", error);\n  });\n}\n\nfunction getFeatures(geographies, parseGeographies) {\n  if (Array.isArray(geographies)) return parseGeographies ? parseGeographies(geographies) : geographies;\n  var feats = (0,topojson_client__WEBPACK_IMPORTED_MODULE_1__.feature)(geographies, geographies.objects[Object.keys(geographies.objects)[0]]).features;\n  return parseGeographies ? parseGeographies(feats) : feats;\n}\n\nfunction prepareFeatures(geographies, path) {\n  return geographies ? geographies.map(function (d, i) {\n    return _extends({}, d, {\n      rsmKey: \"geo-\" + i,\n      svgPath: path(d)\n    });\n  }) : [];\n}\n\nfunction createConnectorPath() {\n  var dx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 30;\n  var dy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\n  var curve = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n\n  var curvature = Array.isArray(curve) ? curve : [curve, curve];\n  var curveX = dx / 2 * curvature[0];\n  var curveY = dy / 2 * curvature[1];\n  return \"M\" + 0 + \",\" + 0 + \" Q\" + (-dx / 2 - curveX) + \",\" + (-dy / 2 + curveY) + \" \" + -dx + \",\" + -dy;\n}\n\nfunction isString(geo) {\n  return typeof geo === \"string\";\n}\n\nfunction useGeographies(_ref) {\n  var geography = _ref.geography,\n      parseGeographies = _ref.parseGeographies;\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      path = _useContext.path;\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),\n      _useState2 = slicedToArray(_useState, 2),\n      geographies = _useState2[0],\n      setGeographies = _useState2[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (typeof window === \"undefined\") return;\n\n    if (isString(geography)) {\n      fetchGeographies(geography).then(function (geos) {\n        if (geos) setGeographies(getFeatures(geos, parseGeographies));\n      });\n    } else {\n      setGeographies(getFeatures(geography, parseGeographies));\n    }\n  }, [geography]);\n\n  var output = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return prepareFeatures(geographies, path);\n  }, [geographies, path]);\n\n  return { geographies: output };\n}\n\nvar Geographies = function Geographies(_ref) {\n  var geography = _ref.geography,\n      children = _ref.children,\n      parseGeographies = _ref.parseGeographies,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"geography\", \"children\", \"parseGeographies\", \"className\"]);\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      path = _useContext.path,\n      projection = _useContext.projection;\n\n  var _useGeographies = useGeographies({ geography: geography, parseGeographies: parseGeographies }),\n      geographies = _useGeographies.geographies;\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"g\",\n    _extends({ className: \"rsm-geographies \" + className }, restProps),\n    geographies && geographies.length > 0 && children({ geographies: geographies, path: path, projection: projection })\n  );\n};\n\nGeographies.propTypes = {\n  geography: prop_types__WEBPACK_IMPORTED_MODULE_14___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_14___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_14___default().object), (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array)]),\n  children: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  parseGeographies: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nvar Geography = function Geography(_ref) {\n  var geography = _ref.geography,\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseLeave = _ref.onMouseLeave,\n      onMouseDown = _ref.onMouseDown,\n      onMouseUp = _ref.onMouseUp,\n      onFocus = _ref.onFocus,\n      onBlur = _ref.onBlur,\n      _ref$style = _ref.style,\n      style = _ref$style === undefined ? {} : _ref$style,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"geography\", \"onMouseEnter\", \"onMouseLeave\", \"onMouseDown\", \"onMouseUp\", \"onFocus\", \"onBlur\", \"style\", \"className\"]);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      _useState2 = slicedToArray(_useState, 2),\n      isPressed = _useState2[0],\n      setPressed = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      _useState4 = slicedToArray(_useState3, 2),\n      isFocused = _useState4[0],\n      setFocus = _useState4[1];\n\n  function handleMouseEnter(evt) {\n    setFocus(true);\n    if (onMouseEnter) onMouseEnter(evt);\n  }\n\n  function handleMouseLeave(evt) {\n    setFocus(false);\n    if (isPressed) setPressed(false);\n    if (onMouseLeave) onMouseLeave(evt);\n  }\n\n  function handleFocus(evt) {\n    setFocus(true);\n    if (onFocus) onFocus(evt);\n  }\n\n  function handleBlur(evt) {\n    setFocus(false);\n    if (isPressed) setPressed(false);\n    if (onBlur) onBlur(evt);\n  }\n\n  function handleMouseDown(evt) {\n    setPressed(true);\n    if (onMouseDown) onMouseDown(evt);\n  }\n\n  function handleMouseUp(evt) {\n    setPressed(false);\n    if (onMouseUp) onMouseUp(evt);\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", _extends({\n    role: \"geography\",\n    tabIndex: \"0\",\n    className: \"rsm-geography \" + className,\n    d: geography.svgPath,\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onMouseDown: handleMouseDown,\n    onMouseUp: handleMouseUp,\n    style: style[isPressed || isFocused ? isPressed ? \"pressed\" : \"hover\" : \"default\"]\n  }, restProps));\n};\n\nGeography.propTypes = {\n  geography: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().object),\n  onMouseEnter: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMouseLeave: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMouseDown: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMouseUp: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onFocus: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onBlur: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  style: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().object),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nvar Geography$1 = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(Geography);\n\nvar Graticule = function Graticule(_ref) {\n  var _ref$fill = _ref.fill,\n      fill = _ref$fill === undefined ? \"transparent\" : _ref$fill,\n      _ref$stroke = _ref.stroke,\n      stroke = _ref$stroke === undefined ? \"currentcolor\" : _ref$stroke,\n      _ref$step = _ref.step,\n      step = _ref$step === undefined ? [10, 10] : _ref$step,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"fill\", \"stroke\", \"step\", \"className\"]);\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      path = _useContext.path;\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", _extends({\n    d: path((0,d3_geo__WEBPACK_IMPORTED_MODULE_15__[\"default\"])().step(step)()),\n    fill: fill,\n    stroke: stroke,\n    className: \"rsm-graticule \" + className\n  }, restProps));\n};\n\nGraticule.propTypes = {\n  fill: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string),\n  stroke: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string),\n  step: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nvar Graticule$1 = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(Graticule);\n\nfunction useZoomPan(_ref) {\n  var _ref$center = _ref.center,\n      center = _ref$center === undefined ? [0, 0] : _ref$center,\n      _ref$zoom = _ref.zoom,\n      zoom = _ref$zoom === undefined ? 1 : _ref$zoom,\n      _ref$minZoom = _ref.minZoom,\n      minZoom = _ref$minZoom === undefined ? 1 : _ref$minZoom,\n      _ref$maxZoom = _ref.maxZoom,\n      maxZoom = _ref$maxZoom === undefined ? 5 : _ref$maxZoom,\n      _ref$zoomSensitivity = _ref.zoomSensitivity,\n      zoomSensitivity = _ref$zoomSensitivity === undefined ? 0.025 : _ref$zoomSensitivity,\n      onZoomStart = _ref.onZoomStart,\n      onZoomEnd = _ref.onZoomEnd,\n      onMoveStart = _ref.onMoveStart,\n      onMoveEnd = _ref.onMoveEnd,\n      _ref$disablePanning = _ref.disablePanning,\n      disablePanning = _ref$disablePanning === undefined ? false : _ref$disablePanning,\n      _ref$disableZooming = _ref.disableZooming,\n      disableZooming = _ref$disableZooming === undefined ? false : _ref$disableZooming;\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      width = _useContext.width,\n      height = _useContext.height,\n      projection = _useContext.projection;\n\n  var wheelTimer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(function () {\n    var c = projection(center);\n    return {\n      x: width / 2 - c[0] * zoom,\n      y: height / 2 - c[1] * zoom,\n      last: [width / 2 - c[0] * zoom, height / 2 - c[1] * zoom],\n      zoom: zoom,\n      dragging: false,\n      zooming: false\n    };\n  }),\n      _useState2 = slicedToArray(_useState, 2),\n      position = _useState2[0],\n      setPosition = _useState2[1];\n\n  var elRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  var point = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  var isPointerDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n  var pointerOrigin = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n\n  function getPointFromEvent(event) {\n    var svg = elRef.current.closest(\"svg\");\n    if (event.targetTouches) {\n      point.current.x = event.targetTouches[0].clientX;\n      point.current.y = event.targetTouches[0].clientY;\n    } else {\n      point.current.x = event.clientX;\n      point.current.y = event.clientY;\n    }\n    var invertedSVGMatrix = svg.getScreenCTM().inverse();\n    return point.current.matrixTransform(invertedSVGMatrix);\n  }\n\n  function onPointerDown(event) {\n    if (disablePanning) return;\n    isPointerDown.current = true;\n    pointerOrigin.current = getPointFromEvent(event);\n    setPosition(function (position) {\n      if (onMoveStart) onMoveStart(event, _extends({}, position, { dragging: true }));\n      return _extends({}, position, { dragging: true });\n    });\n  }\n\n  function onPointerMove(event) {\n    if (!isPointerDown.current) return;\n    event.preventDefault();\n    var pointerPosition = getPointFromEvent(event);\n    setPosition(function (position) {\n      return _extends({}, position, {\n        x: position.last[0] + (pointerPosition.x - pointerOrigin.current.x),\n        y: position.last[1] + (pointerPosition.y - pointerOrigin.current.y)\n      });\n    });\n  }\n\n  function onPointerUp(event) {\n    isPointerDown.current = false;\n    setPosition(function (position) {\n      if (onMoveEnd) {\n        onMoveEnd(event, _extends({}, position, { last: [position.x, position.y], dragging: false }));\n      }\n      return _extends({}, position, {\n        last: [position.x, position.y],\n        dragging: false\n      });\n    });\n  }\n\n  function handleWheel(event) {\n    if (!event.ctrlKey) return;\n    if (disableZooming) return;\n    event.preventDefault();\n\n    var speed = event.deltaY * zoomSensitivity;\n\n    setPosition(function (position) {\n      var newZoom = position.zoom - speed;\n      var zoom = newZoom < minZoom ? minZoom : newZoom > maxZoom ? maxZoom : newZoom;\n\n      var pointerPosition = getPointFromEvent(event);\n\n      var x = (position.x - pointerPosition.x) * zoom / position.zoom + pointerPosition.x;\n      var y = (position.y - pointerPosition.y) * zoom / position.zoom + pointerPosition.y;\n\n      window.clearTimeout(wheelTimer.current);\n      wheelTimer.current = setTimeout(function () {\n        setPosition(function (position) {\n          if (onZoomEnd) onZoomEnd(event, position);\n          return _extends({}, position, { zooming: false });\n        });\n      }, 66);\n\n      if (onZoomStart) {\n        onZoomStart(event, _extends({}, position, {\n          x: x,\n          y: y,\n          last: [x, y],\n          zoom: zoom,\n          zooming: true\n        }));\n      }\n\n      return _extends({}, position, {\n        x: x,\n        y: y,\n        last: [x, y],\n        zoom: zoom,\n        zooming: true\n      });\n    });\n  }\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(function () {\n    var svg = elRef.current.closest(\"svg\");\n    point.current = svg.createSVGPoint();\n\n    svg.addEventListener(\"wheel\", handleWheel);\n\n    if (window.PointerEvent) {\n      svg.addEventListener(\"pointerdown\", onPointerDown);\n      svg.addEventListener(\"pointerup\", onPointerUp);\n      svg.addEventListener(\"pointerleave\", onPointerUp);\n      svg.addEventListener(\"pointermove\", onPointerMove);\n    } else {\n      svg.addEventListener(\"mousedown\", onPointerDown);\n      svg.addEventListener(\"mouseup\", onPointerUp);\n      svg.addEventListener(\"mouseleave\", onPointerUp);\n      svg.addEventListener(\"mousemove\", onPointerMove);\n      svg.addEventListener(\"touchstart\", onPointerDown);\n      svg.addEventListener(\"touchend\", onPointerUp);\n      svg.addEventListener(\"touchmove\", onPointerMove);\n    }\n\n    return function () {\n      svg.removeEventListener(\"wheel\", handleWheel);\n      if (window.PointerEvent) {\n        svg.removeEventListener(\"pointerdown\", onPointerDown);\n        svg.removeEventListener(\"pointerup\", onPointerUp);\n        svg.removeEventListener(\"pointerleave\", onPointerUp);\n        svg.removeEventListener(\"pointermove\", onPointerMove);\n      } else {\n        svg.removeEventListener(\"mousedown\", onPointerDown);\n        svg.removeEventListener(\"mouseup\", onPointerUp);\n        svg.removeEventListener(\"mouseleave\", onPointerUp);\n        svg.removeEventListener(\"mousemove\", onPointerMove);\n        svg.removeEventListener(\"touchstart\", onPointerDown);\n        svg.removeEventListener(\"touchend\", onPointerUp);\n        svg.removeEventListener(\"touchmove\", onPointerMove);\n      }\n    };\n  }, []);\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    setPosition(function (position) {\n      var x = (position.x - width / 2) * zoom / position.zoom + width / 2;\n      var y = (position.y - height / 2) * zoom / position.zoom + height / 2;\n      return _extends({}, position, { x: x, y: y, last: [x, y], zoom: zoom });\n    });\n  }, [zoom]);\n\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var c = projection(center);\n    setPosition(function (position) {\n      return _extends({}, position, {\n        x: width / 2 - c[0] * position.zoom,\n        y: height / 2 - c[1] * position.zoom,\n        last: [width / 2 - c[0] * position.zoom, height / 2 - c[1] * position.zoom]\n      });\n    });\n  }, [center[0], center[1]]);\n\n  return {\n    elRef: elRef,\n    position: position,\n    transformString: \"translate(\" + position.x + \" \" + position.y + \") scale(\" + position.zoom + \")\"\n  };\n}\n\nvar ZoomableGroup = function ZoomableGroup(_ref) {\n  var render = _ref.render,\n      children = _ref.children,\n      _ref$center = _ref.center,\n      center = _ref$center === undefined ? [0, 0] : _ref$center,\n      _ref$zoom = _ref.zoom,\n      zoom = _ref$zoom === undefined ? 1 : _ref$zoom,\n      _ref$minZoom = _ref.minZoom,\n      minZoom = _ref$minZoom === undefined ? 1 : _ref$minZoom,\n      _ref$maxZoom = _ref.maxZoom,\n      maxZoom = _ref$maxZoom === undefined ? 5 : _ref$maxZoom,\n      _ref$zoomSensitivity = _ref.zoomSensitivity,\n      zoomSensitivity = _ref$zoomSensitivity === undefined ? 0.025 : _ref$zoomSensitivity,\n      onZoomStart = _ref.onZoomStart,\n      onZoomEnd = _ref.onZoomEnd,\n      onMoveStart = _ref.onMoveStart,\n      onMoveEnd = _ref.onMoveEnd,\n      _ref$disablePanning = _ref.disablePanning,\n      disablePanning = _ref$disablePanning === undefined ? false : _ref$disablePanning,\n      _ref$disableZooming = _ref.disableZooming,\n      disableZooming = _ref$disableZooming === undefined ? false : _ref$disableZooming,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"render\", \"children\", \"center\", \"zoom\", \"minZoom\", \"maxZoom\", \"zoomSensitivity\", \"onZoomStart\", \"onZoomEnd\", \"onMoveStart\", \"onMoveEnd\", \"disablePanning\", \"disableZooming\", \"className\"]);\n\n  var _useZoomPan = useZoomPan({\n    center: center,\n    zoom: zoom,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    zoomSensitivity: zoomSensitivity,\n    onZoomStart: onZoomStart,\n    onZoomEnd: onZoomEnd,\n    onMoveStart: onMoveStart,\n    onMoveEnd: onMoveEnd,\n    disablePanning: disablePanning,\n    disableZooming: disableZooming\n  }),\n      elRef = _useZoomPan.elRef,\n      position = _useZoomPan.position,\n      transformString = _useZoomPan.transformString;\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"g\",\n    _extends({\n      ref: elRef,\n      className: \"rsm-zoomable-group \" + className\n    }, restProps),\n    render ? render(position) : react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      \"g\",\n      { transform: transformString },\n      children\n    )\n  );\n};\n\nZoomableGroup.propTypes = {\n  render: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  children: prop_types__WEBPACK_IMPORTED_MODULE_14___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_14___default().node), prop_types__WEBPACK_IMPORTED_MODULE_14___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_14___default().node))]),\n  center: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array),\n  zoom: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  minZoom: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  maxZoom: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  zoomSensitivity: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  onZoomStart: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onZoomEnd: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMoveStart: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMoveEnd: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  disablePanning: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().bool),\n  disableZooming: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().bool),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nvar Sphere = function Sphere(_ref) {\n  var _ref$id = _ref.id,\n      id = _ref$id === undefined ? \"rsm-sphere\" : _ref$id,\n      _ref$fill = _ref.fill,\n      fill = _ref$fill === undefined ? \"transparent\" : _ref$fill,\n      _ref$stroke = _ref.stroke,\n      stroke = _ref$stroke === undefined ? \"currentcolor\" : _ref$stroke,\n      _ref$strokeWidth = _ref.strokeWidth,\n      strokeWidth = _ref$strokeWidth === undefined ? 0.5 : _ref$strokeWidth,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"id\", \"fill\", \"stroke\", \"strokeWidth\", \"className\"]);\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      path = _useContext.path;\n\n  var spherePath = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return path({ type: \"Sphere\" });\n  }, [path]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    react__WEBPACK_IMPORTED_MODULE_0__.Fragment,\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n      \"defs\",\n      null,\n      react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n        \"clipPath\",\n        { id: id },\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", { d: spherePath })\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", _extends({\n      d: spherePath,\n      fill: fill,\n      stroke: stroke,\n      strokeWidth: strokeWidth,\n      style: { pointerEvents: \"none\" },\n      className: \"rsm-sphere \" + className\n    }, restProps))\n  );\n};\n\nSphere.propTypes = {\n  id: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string),\n  fill: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string),\n  stroke: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string),\n  strokeWidth: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nvar Sphere$1 = (0,react__WEBPACK_IMPORTED_MODULE_0__.memo)(Sphere);\n\nvar Marker = function Marker(_ref) {\n  var coordinates = _ref.coordinates,\n      children = _ref.children,\n      onMouseEnter = _ref.onMouseEnter,\n      onMouseLeave = _ref.onMouseLeave,\n      onMouseDown = _ref.onMouseDown,\n      onMouseUp = _ref.onMouseUp,\n      onFocus = _ref.onFocus,\n      onBlur = _ref.onBlur,\n      _ref$style = _ref.style,\n      style = _ref$style === undefined ? {} : _ref$style,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"coordinates\", \"children\", \"onMouseEnter\", \"onMouseLeave\", \"onMouseDown\", \"onMouseUp\", \"onFocus\", \"onBlur\", \"style\", \"className\"]);\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      projection = _useContext.projection;\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      _useState2 = slicedToArray(_useState, 2),\n      isPressed = _useState2[0],\n      setPressed = _useState2[1];\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n      _useState4 = slicedToArray(_useState3, 2),\n      isFocused = _useState4[0],\n      setFocus = _useState4[1];\n\n  var _projection = projection(coordinates),\n      _projection2 = slicedToArray(_projection, 2),\n      x = _projection2[0],\n      y = _projection2[1];\n\n  function handleMouseEnter(evt) {\n    setFocus(true);\n    if (onMouseEnter) onMouseEnter(evt);\n  }\n\n  function handleMouseLeave(evt) {\n    setFocus(false);\n    if (isPressed) setPressed(false);\n    if (onMouseLeave) onMouseLeave(evt);\n  }\n\n  function handleFocus(evt) {\n    setFocus(true);\n    if (onFocus) onFocus(evt);\n  }\n\n  function handleBlur(evt) {\n    setFocus(false);\n    if (isPressed) setPressed(false);\n    if (onBlur) onBlur(evt);\n  }\n\n  function handleMouseDown(evt) {\n    setPressed(true);\n    if (onMouseDown) onMouseDown(evt);\n  }\n\n  function handleMouseUp(evt) {\n    setPressed(false);\n    if (onMouseUp) onMouseUp(evt);\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"g\",\n    _extends({\n      transform: \"translate(\" + x + \", \" + y + \")\",\n      className: \"rsm-marker \" + className,\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      onMouseDown: handleMouseDown,\n      onMouseUp: handleMouseUp,\n      style: style[isPressed || isFocused ? isPressed ? \"pressed\" : \"hover\" : \"default\"]\n    }, restProps),\n    children\n  );\n};\n\nMarker.propTypes = {\n  coordinates: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array),\n  children: prop_types__WEBPACK_IMPORTED_MODULE_14___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_14___default().node), prop_types__WEBPACK_IMPORTED_MODULE_14___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_14___default().node))]),\n  onMouseEnter: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMouseLeave: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMouseDown: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onMouseUp: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onFocus: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  onBlur: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().func),\n  style: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().object),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nvar Line = function Line(_ref) {\n  var _ref$from = _ref.from,\n      from = _ref$from === undefined ? [0, 0] : _ref$from,\n      _ref$to = _ref.to,\n      to = _ref$to === undefined ? [0, 0] : _ref$to,\n      coordinates = _ref.coordinates,\n      _ref$stroke = _ref.stroke,\n      stroke = _ref$stroke === undefined ? \"currentcolor\" : _ref$stroke,\n      _ref$strokeWidth = _ref.strokeWidth,\n      strokeWidth = _ref$strokeWidth === undefined ? 3 : _ref$strokeWidth,\n      _ref$fill = _ref.fill,\n      fill = _ref$fill === undefined ? \"transparent\" : _ref$fill,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"from\", \"to\", \"coordinates\", \"stroke\", \"strokeWidth\", \"fill\", \"className\"]);\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      path = _useContext.path;\n\n  var lineData = {\n    type: \"LineString\",\n    coordinates: coordinates || [from, to]\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", _extends({\n    d: path(lineData),\n    className: \"rsm-line \" + className,\n    stroke: stroke,\n    strokeWidth: strokeWidth,\n    fill: fill\n  }, restProps));\n};\n\nLine.propTypes = {\n  from: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array),\n  to: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array),\n  coordinates: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array),\n  stroke: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string),\n  strokeWidth: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  fill: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\nvar Annotation = function Annotation(_ref) {\n  var subject = _ref.subject,\n      children = _ref.children,\n      connectorProps = _ref.connectorProps,\n      _ref$dx = _ref.dx,\n      dx = _ref$dx === undefined ? 30 : _ref$dx,\n      _ref$dy = _ref.dy,\n      dy = _ref$dy === undefined ? 30 : _ref$dy,\n      _ref$curve = _ref.curve,\n      curve = _ref$curve === undefined ? 0 : _ref$curve,\n      _ref$className = _ref.className,\n      className = _ref$className === undefined ? \"\" : _ref$className,\n      restProps = objectWithoutProperties(_ref, [\"subject\", \"children\", \"connectorProps\", \"dx\", \"dy\", \"curve\", \"className\"]);\n\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MapContext),\n      projection = _useContext.projection;\n\n  var _projection = projection(subject),\n      _projection2 = slicedToArray(_projection, 2),\n      x = _projection2[0],\n      y = _projection2[1];\n\n  var connectorPath = createConnectorPath(dx, dy, curve);\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\n    \"g\",\n    _extends({\n      transform: \"translate(\" + (x + dx) + \", \" + (y + dy) + \")\",\n      className: \"rsm-annotation \" + className\n    }, restProps),\n    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"path\", _extends({ d: connectorPath, fill: \"transparent\", stroke: \"#000\" }, connectorProps)),\n    children\n  );\n};\n\nAnnotation.propTypes = {\n  subject: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().array),\n  children: prop_types__WEBPACK_IMPORTED_MODULE_14___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_14___default().node), prop_types__WEBPACK_IMPORTED_MODULE_14___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_14___default().node))]),\n  dx: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  dy: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  curve: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().number),\n  connectorProps: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().object),\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_14___default().string)\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc2ltcGxlLW1hcHMvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnSTtBQUM3RjtBQUNvTjtBQUM3TTs7QUFFMUM7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdEQUFnRCwrQkFBK0I7QUFDL0U7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsaUJBQWlCLG9EQUFhOztBQUU5QjtBQUNBLGlCQUFpQiw4Q0FBYTtBQUM5QixlQUFlLDhDQUFXO0FBQzFCLHlCQUF5Qiw4Q0FBcUI7QUFDOUMsYUFBYSw4Q0FBUztBQUN0QixnQkFBZ0IsOENBQVk7QUFDNUIseUJBQXlCLDhDQUFxQjtBQUM5QywyQkFBMkIsOENBQXVCO0FBQ2xELG1CQUFtQiw4Q0FBZTtBQUNsQyxxQkFBcUIsK0NBQWlCO0FBQ3RDLHFCQUFxQiwrQ0FBaUI7QUFDdEMsdUJBQXVCLCtDQUFtQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0Esa0VBQWtFO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNB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QUFnQjtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsaURBQVU7QUFDOUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsU0FBUywwREFBbUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSwwREFBbUIsb0JBQW9CLHVEQUF1RDtBQUNsRztBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLDBEQUFlO0FBQzFCLFlBQVksNERBQW1CLEVBQUUseURBQWMsRUFBRSwwREFBaUIsQ0FBQyx5REFBYztBQUNqRixNQUFNLDJEQUFnQjtBQUN0QixNQUFNLDJEQUFnQjtBQUN0QixTQUFTLDJEQUFnQjtBQUN6QixrQkFBa0IsMkRBQWdCO0FBQ2xDLGFBQWEsMkRBQWdCO0FBQzdCOztBQUVtTCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBeWFuXFxEZXNrdG9wXFx3b3JsZC1tYXAtZnVsY3J1bXdlYnNpdGUtbWFzdGVyIDNcXHdvcmxkLW1hcC1mdWxjcnVtd2Vic2l0ZS1tYXN0ZXIgMlxcbm9kZV9tb2R1bGVzXFxyZWFjdC1zaW1wbGUtbWFwc1xcZGlzdFxcaW5kZXguZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZU1lbW8sIHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIG1lbW8sIHVzZVJlZiwgdXNlTGF5b3V0RWZmZWN0LCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBnZW9QYXRoLCBnZW9FcXVhbEVhcnRoLCBnZW9NZXJjYXRvciwgZ2VvVHJhbnN2ZXJzZU1lcmNhdG9yLCBnZW9BbGJlcnMsIGdlb0FsYmVyc1VzYSwgZ2VvQXppbXV0aGFsRXF1YWxBcmVhLCBnZW9BemltdXRoYWxFcXVpZGlzdGFudCwgZ2VvT3J0aG9ncmFwaGljLCBnZW9Db25pY0NvbmZvcm1hbCwgZ2VvQ29uaWNFcXVhbEFyZWEsIGdlb0NvbmljRXF1aWRpc3RhbnQsIGdlb0dyYXRpY3VsZSB9IGZyb20gJ2QzLWdlbyc7XG5pbXBvcnQgeyBmZWF0dXJlIH0gZnJvbSAndG9wb2pzb24tY2xpZW50JztcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbnZhciBvYmplY3RXaXRob3V0UHJvcGVydGllcyA9IGZ1bmN0aW9uIChvYmosIGtleXMpIHtcbiAgdmFyIHRhcmdldCA9IHt9O1xuXG4gIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTtcbiAgICB0YXJnZXRbaV0gPSBvYmpbaV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIHNsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7XG4gICAgdmFyIF9hcnIgPSBbXTtcbiAgICB2YXIgX24gPSB0cnVlO1xuICAgIHZhciBfZCA9IGZhbHNlO1xuICAgIHZhciBfZSA9IHVuZGVmaW5lZDtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2QgPSB0cnVlO1xuICAgICAgX2UgPSBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfYXJyO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7XG4gICAgICByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbiAgICB9XG4gIH07XG59KCk7XG5cbnZhciBNYXBDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xuXG52YXIgcHJvamVjdGlvbnMgPSB7XG4gIGdlb0VxdWFsRWFydGg6IGdlb0VxdWFsRWFydGgsXG4gIGdlb01lcmNhdG9yOiBnZW9NZXJjYXRvcixcbiAgZ2VvVHJhbnN2ZXJzZU1lcmNhdG9yOiBnZW9UcmFuc3ZlcnNlTWVyY2F0b3IsXG4gIGdlb0FsYmVyczogZ2VvQWxiZXJzLFxuICBnZW9BbGJlcnNVc2E6IGdlb0FsYmVyc1VzYSxcbiAgZ2VvQXppbXV0aGFsRXF1YWxBcmVhOiBnZW9BemltdXRoYWxFcXVhbEFyZWEsXG4gIGdlb0F6aW11dGhhbEVxdWlkaXN0YW50OiBnZW9BemltdXRoYWxFcXVpZGlzdGFudCxcbiAgZ2VvT3J0aG9ncmFwaGljOiBnZW9PcnRob2dyYXBoaWMsXG4gIGdlb0NvbmljQ29uZm9ybWFsOiBnZW9Db25pY0NvbmZvcm1hbCxcbiAgZ2VvQ29uaWNFcXVhbEFyZWE6IGdlb0NvbmljRXF1YWxBcmVhLFxuICBnZW9Db25pY0VxdWlkaXN0YW50OiBnZW9Db25pY0VxdWlkaXN0YW50XG59O1xuXG52YXIgbWFrZVByb2plY3Rpb24gPSBmdW5jdGlvbiBtYWtlUHJvamVjdGlvbihfcmVmKSB7XG4gIHZhciBfcmVmJHByb2plY3Rpb25Db25maWcgPSBfcmVmLnByb2plY3Rpb25Db25maWcsXG4gICAgICBwcm9qZWN0aW9uQ29uZmlnID0gX3JlZiRwcm9qZWN0aW9uQ29uZmlnID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkcHJvamVjdGlvbkNvbmZpZyxcbiAgICAgIF9yZWYkcHJvamVjdGlvbiA9IF9yZWYucHJvamVjdGlvbixcbiAgICAgIHByb2plY3Rpb24gPSBfcmVmJHByb2plY3Rpb24gPT09IHVuZGVmaW5lZCA/IFwiZ2VvRXF1YWxFYXJ0aFwiIDogX3JlZiRwcm9qZWN0aW9uLFxuICAgICAgX3JlZiR3aWR0aCA9IF9yZWYud2lkdGgsXG4gICAgICB3aWR0aCA9IF9yZWYkd2lkdGggPT09IHVuZGVmaW5lZCA/IDgwMCA6IF9yZWYkd2lkdGgsXG4gICAgICBfcmVmJGhlaWdodCA9IF9yZWYuaGVpZ2h0LFxuICAgICAgaGVpZ2h0ID0gX3JlZiRoZWlnaHQgPT09IHVuZGVmaW5lZCA/IDUwMCA6IF9yZWYkaGVpZ2h0O1xuXG4gIHZhciBpc0Z1bmMgPSB0eXBlb2YgcHJvamVjdGlvbiA9PT0gXCJmdW5jdGlvblwiO1xuXG4gIGlmIChpc0Z1bmMpIHJldHVybiBwcm9qZWN0aW9uO1xuXG4gIHZhciBwcm9qID0gcHJvamVjdGlvbnNbcHJvamVjdGlvbl0oKS50cmFuc2xhdGUoW3dpZHRoIC8gMiwgaGVpZ2h0IC8gMl0pO1xuXG4gIHZhciBzdXBwb3J0ZWQgPSBbcHJvai5jZW50ZXIgPyBcImNlbnRlclwiIDogbnVsbCwgcHJvai5yb3RhdGUgPyBcInJvdGF0ZVwiIDogbnVsbCwgcHJvai5zY2FsZSA/IFwic2NhbGVcIiA6IG51bGwsIHByb2oucGFyYWxsZWxzID8gXCJwYXJhbGxlbHNcIiA6IG51bGxdO1xuXG4gIHN1cHBvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7XG4gICAgaWYgKCFkKSByZXR1cm47XG4gICAgcHJvaiA9IHByb2pbZF0ocHJvamVjdGlvbkNvbmZpZ1tkXSB8fCBwcm9qW2RdKCkpO1xuICB9KTtcblxuICByZXR1cm4gcHJvajtcbn07XG5cbnZhciBNYXBQcm92aWRlciA9IGZ1bmN0aW9uIE1hcFByb3ZpZGVyKF9yZWYyKSB7XG4gIHZhciB3aWR0aCA9IF9yZWYyLndpZHRoLFxuICAgICAgaGVpZ2h0ID0gX3JlZjIuaGVpZ2h0LFxuICAgICAgcHJvamVjdGlvbiA9IF9yZWYyLnByb2plY3Rpb24sXG4gICAgICBwcm9qZWN0aW9uQ29uZmlnID0gX3JlZjIucHJvamVjdGlvbkNvbmZpZyxcbiAgICAgIHJlc3RQcm9wcyA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYyLCBbXCJ3aWR0aFwiLCBcImhlaWdodFwiLCBcInByb2plY3Rpb25cIiwgXCJwcm9qZWN0aW9uQ29uZmlnXCJdKTtcblxuICB2YXIgYyA9IHByb2plY3Rpb25Db25maWcuY2VudGVyIHx8IFtdO1xuICB2YXIgciA9IHByb2plY3Rpb25Db25maWcucm90YXRlIHx8IFtdO1xuICB2YXIgcCA9IHByb2plY3Rpb25Db25maWcucGFyYWxsZWxzIHx8IFtdO1xuICB2YXIgcyA9IHByb2plY3Rpb25Db25maWcuc2NhbGUgfHwgbnVsbDtcblxuICB2YXIgdmFsdWUgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcHJvaiA9IG1ha2VQcm9qZWN0aW9uKHtcbiAgICAgIHByb2plY3Rpb25Db25maWc6IHByb2plY3Rpb25Db25maWcsXG4gICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICBwcm9qZWN0aW9uOiBwcm9qLFxuICAgICAgcGF0aDogZ2VvUGF0aCgpLnByb2plY3Rpb24ocHJvailcbiAgICB9O1xuICB9LCBbd2lkdGgsIGhlaWdodCwgcHJvamVjdGlvbiwgY1swXSwgY1sxXSwgclswXSwgclsxXSwgclsyXSwgcFswXSwgcFsxXSwgc10pO1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KE1hcENvbnRleHQuUHJvdmlkZXIsIF9leHRlbmRzKHsgdmFsdWU6IHZhbHVlIH0sIHJlc3RQcm9wcykpO1xufTtcblxuTWFwUHJvdmlkZXIucHJvcFR5cGVzID0ge1xuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLFxuICBwcm9qZWN0aW9uOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuZnVuY10pLFxuICBwcm9qZWN0aW9uQ29uZmlnOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG52YXIgQ29tcG9zYWJsZU1hcCA9IGZ1bmN0aW9uIENvbXBvc2FibGVNYXAoX3JlZikge1xuICB2YXIgX3JlZiR3aWR0aCA9IF9yZWYud2lkdGgsXG4gICAgICB3aWR0aCA9IF9yZWYkd2lkdGggPT09IHVuZGVmaW5lZCA/IDgwMCA6IF9yZWYkd2lkdGgsXG4gICAgICBfcmVmJGhlaWdodCA9IF9yZWYuaGVpZ2h0LFxuICAgICAgaGVpZ2h0ID0gX3JlZiRoZWlnaHQgPT09IHVuZGVmaW5lZCA/IDYwMCA6IF9yZWYkaGVpZ2h0LFxuICAgICAgX3JlZiRwcm9qZWN0aW9uID0gX3JlZi5wcm9qZWN0aW9uLFxuICAgICAgcHJvamVjdGlvbiA9IF9yZWYkcHJvamVjdGlvbiA9PT0gdW5kZWZpbmVkID8gXCJnZW9FcXVhbEVhcnRoXCIgOiBfcmVmJHByb2plY3Rpb24sXG4gICAgICBfcmVmJHByb2plY3Rpb25Db25maWcgPSBfcmVmLnByb2plY3Rpb25Db25maWcsXG4gICAgICBwcm9qZWN0aW9uQ29uZmlnID0gX3JlZiRwcm9qZWN0aW9uQ29uZmlnID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkcHJvamVjdGlvbkNvbmZpZyxcbiAgICAgIF9yZWYkY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmJGNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IF9yZWYkY2xhc3NOYW1lLFxuICAgICAgcmVzdFByb3BzID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wid2lkdGhcIiwgXCJoZWlnaHRcIiwgXCJwcm9qZWN0aW9uXCIsIFwicHJvamVjdGlvbkNvbmZpZ1wiLCBcImNsYXNzTmFtZVwiXSk7XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgTWFwUHJvdmlkZXIsXG4gICAge1xuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgcHJvamVjdGlvbkNvbmZpZzogcHJvamVjdGlvbkNvbmZpZ1xuICAgIH0sXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInN2Z1wiLCBfZXh0ZW5kcyh7XG4gICAgICB2aWV3Qm94OiBcIjAgMCBcIiArIHdpZHRoICsgXCIgXCIgKyBoZWlnaHQsXG4gICAgICBjbGFzc05hbWU6IFwicnNtLXN2ZyBcIiArIGNsYXNzTmFtZVxuICAgIH0sIHJlc3RQcm9wcykpXG4gICk7XG59O1xuXG5Db21wb3NhYmxlTWFwLnByb3BUeXBlcyA9IHtcbiAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGhlaWdodDogUHJvcFR5cGVzLm51bWJlcixcbiAgcHJvamVjdGlvbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgcHJvamVjdGlvbkNvbmZpZzogUHJvcFR5cGVzLm9iamVjdCxcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG5mdW5jdGlvbiBmZXRjaEdlb2dyYXBoaWVzKHVybCkge1xuICByZXR1cm4gZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgdGhyb3cgRXJyb3IocmVzLnN0YXR1c1RleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHdoZW4gZmV0Y2hpbmcgdGhlIGRhdGE6IFwiLCBlcnJvcik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRGZWF0dXJlcyhnZW9ncmFwaGllcywgcGFyc2VHZW9ncmFwaGllcykge1xuICBpZiAoQXJyYXkuaXNBcnJheShnZW9ncmFwaGllcykpIHJldHVybiBwYXJzZUdlb2dyYXBoaWVzID8gcGFyc2VHZW9ncmFwaGllcyhnZW9ncmFwaGllcykgOiBnZW9ncmFwaGllcztcbiAgdmFyIGZlYXRzID0gZmVhdHVyZShnZW9ncmFwaGllcywgZ2VvZ3JhcGhpZXMub2JqZWN0c1tPYmplY3Qua2V5cyhnZW9ncmFwaGllcy5vYmplY3RzKVswXV0pLmZlYXR1cmVzO1xuICByZXR1cm4gcGFyc2VHZW9ncmFwaGllcyA/IHBhcnNlR2VvZ3JhcGhpZXMoZmVhdHMpIDogZmVhdHM7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVGZWF0dXJlcyhnZW9ncmFwaGllcywgcGF0aCkge1xuICByZXR1cm4gZ2VvZ3JhcGhpZXMgPyBnZW9ncmFwaGllcy5tYXAoZnVuY3Rpb24gKGQsIGkpIHtcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIGQsIHtcbiAgICAgIHJzbUtleTogXCJnZW8tXCIgKyBpLFxuICAgICAgc3ZnUGF0aDogcGF0aChkKVxuICAgIH0pO1xuICB9KSA6IFtdO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDb25uZWN0b3JQYXRoKCkge1xuICB2YXIgZHggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDMwO1xuICB2YXIgZHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDMwO1xuICB2YXIgY3VydmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDAuNTtcblxuICB2YXIgY3VydmF0dXJlID0gQXJyYXkuaXNBcnJheShjdXJ2ZSkgPyBjdXJ2ZSA6IFtjdXJ2ZSwgY3VydmVdO1xuICB2YXIgY3VydmVYID0gZHggLyAyICogY3VydmF0dXJlWzBdO1xuICB2YXIgY3VydmVZID0gZHkgLyAyICogY3VydmF0dXJlWzFdO1xuICByZXR1cm4gXCJNXCIgKyAwICsgXCIsXCIgKyAwICsgXCIgUVwiICsgKC1keCAvIDIgLSBjdXJ2ZVgpICsgXCIsXCIgKyAoLWR5IC8gMiArIGN1cnZlWSkgKyBcIiBcIiArIC1keCArIFwiLFwiICsgLWR5O1xufVxuXG5mdW5jdGlvbiBpc1N0cmluZyhnZW8pIHtcbiAgcmV0dXJuIHR5cGVvZiBnZW8gPT09IFwic3RyaW5nXCI7XG59XG5cbmZ1bmN0aW9uIHVzZUdlb2dyYXBoaWVzKF9yZWYpIHtcbiAgdmFyIGdlb2dyYXBoeSA9IF9yZWYuZ2VvZ3JhcGh5LFxuICAgICAgcGFyc2VHZW9ncmFwaGllcyA9IF9yZWYucGFyc2VHZW9ncmFwaGllcztcblxuICB2YXIgX3VzZUNvbnRleHQgPSB1c2VDb250ZXh0KE1hcENvbnRleHQpLFxuICAgICAgcGF0aCA9IF91c2VDb250ZXh0LnBhdGg7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKCksXG4gICAgICBfdXNlU3RhdGUyID0gc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgZ2VvZ3JhcGhpZXMgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0R2VvZ3JhcGhpZXMgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblxuICAgIGlmIChpc1N0cmluZyhnZW9ncmFwaHkpKSB7XG4gICAgICBmZXRjaEdlb2dyYXBoaWVzKGdlb2dyYXBoeSkudGhlbihmdW5jdGlvbiAoZ2Vvcykge1xuICAgICAgICBpZiAoZ2Vvcykgc2V0R2VvZ3JhcGhpZXMoZ2V0RmVhdHVyZXMoZ2VvcywgcGFyc2VHZW9ncmFwaGllcykpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEdlb2dyYXBoaWVzKGdldEZlYXR1cmVzKGdlb2dyYXBoeSwgcGFyc2VHZW9ncmFwaGllcykpO1xuICAgIH1cbiAgfSwgW2dlb2dyYXBoeV0pO1xuXG4gIHZhciBvdXRwdXQgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJlcGFyZUZlYXR1cmVzKGdlb2dyYXBoaWVzLCBwYXRoKTtcbiAgfSwgW2dlb2dyYXBoaWVzLCBwYXRoXSk7XG5cbiAgcmV0dXJuIHsgZ2VvZ3JhcGhpZXM6IG91dHB1dCB9O1xufVxuXG52YXIgR2VvZ3JhcGhpZXMgPSBmdW5jdGlvbiBHZW9ncmFwaGllcyhfcmVmKSB7XG4gIHZhciBnZW9ncmFwaHkgPSBfcmVmLmdlb2dyYXBoeSxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHBhcnNlR2VvZ3JhcGhpZXMgPSBfcmVmLnBhcnNlR2VvZ3JhcGhpZXMsXG4gICAgICBfcmVmJGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZiRjbGFzc05hbWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBfcmVmJGNsYXNzTmFtZSxcbiAgICAgIHJlc3RQcm9wcyA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImdlb2dyYXBoeVwiLCBcImNoaWxkcmVuXCIsIFwicGFyc2VHZW9ncmFwaGllc1wiLCBcImNsYXNzTmFtZVwiXSk7XG5cbiAgdmFyIF91c2VDb250ZXh0ID0gdXNlQ29udGV4dChNYXBDb250ZXh0KSxcbiAgICAgIHBhdGggPSBfdXNlQ29udGV4dC5wYXRoLFxuICAgICAgcHJvamVjdGlvbiA9IF91c2VDb250ZXh0LnByb2plY3Rpb247XG5cbiAgdmFyIF91c2VHZW9ncmFwaGllcyA9IHVzZUdlb2dyYXBoaWVzKHsgZ2VvZ3JhcGh5OiBnZW9ncmFwaHksIHBhcnNlR2VvZ3JhcGhpZXM6IHBhcnNlR2VvZ3JhcGhpZXMgfSksXG4gICAgICBnZW9ncmFwaGllcyA9IF91c2VHZW9ncmFwaGllcy5nZW9ncmFwaGllcztcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICBcImdcIixcbiAgICBfZXh0ZW5kcyh7IGNsYXNzTmFtZTogXCJyc20tZ2VvZ3JhcGhpZXMgXCIgKyBjbGFzc05hbWUgfSwgcmVzdFByb3BzKSxcbiAgICBnZW9ncmFwaGllcyAmJiBnZW9ncmFwaGllcy5sZW5ndGggPiAwICYmIGNoaWxkcmVuKHsgZ2VvZ3JhcGhpZXM6IGdlb2dyYXBoaWVzLCBwYXRoOiBwYXRoLCBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uIH0pXG4gICk7XG59O1xuXG5HZW9ncmFwaGllcy5wcm9wVHlwZXMgPSB7XG4gIGdlb2dyYXBoeTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLm9iamVjdCwgUHJvcFR5cGVzLmFycmF5XSksXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMuZnVuYyxcbiAgcGFyc2VHZW9ncmFwaGllczogUHJvcFR5cGVzLmZ1bmMsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxudmFyIEdlb2dyYXBoeSA9IGZ1bmN0aW9uIEdlb2dyYXBoeShfcmVmKSB7XG4gIHZhciBnZW9ncmFwaHkgPSBfcmVmLmdlb2dyYXBoeSxcbiAgICAgIG9uTW91c2VFbnRlciA9IF9yZWYub25Nb3VzZUVudGVyLFxuICAgICAgb25Nb3VzZUxlYXZlID0gX3JlZi5vbk1vdXNlTGVhdmUsXG4gICAgICBvbk1vdXNlRG93biA9IF9yZWYub25Nb3VzZURvd24sXG4gICAgICBvbk1vdXNlVXAgPSBfcmVmLm9uTW91c2VVcCxcbiAgICAgIG9uRm9jdXMgPSBfcmVmLm9uRm9jdXMsXG4gICAgICBvbkJsdXIgPSBfcmVmLm9uQmx1cixcbiAgICAgIF9yZWYkc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgc3R5bGUgPSBfcmVmJHN0eWxlID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkc3R5bGUsXG4gICAgICBfcmVmJGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZiRjbGFzc05hbWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBfcmVmJGNsYXNzTmFtZSxcbiAgICAgIHJlc3RQcm9wcyA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImdlb2dyYXBoeVwiLCBcIm9uTW91c2VFbnRlclwiLCBcIm9uTW91c2VMZWF2ZVwiLCBcIm9uTW91c2VEb3duXCIsIFwib25Nb3VzZVVwXCIsIFwib25Gb2N1c1wiLCBcIm9uQmx1clwiLCBcInN0eWxlXCIsIFwiY2xhc3NOYW1lXCJdKTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX3VzZVN0YXRlMiA9IHNsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGlzUHJlc3NlZCA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRQcmVzc2VkID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTQgPSBzbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLFxuICAgICAgaXNGb2N1c2VkID0gX3VzZVN0YXRlNFswXSxcbiAgICAgIHNldEZvY3VzID0gX3VzZVN0YXRlNFsxXTtcblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZUVudGVyKGV2dCkge1xuICAgIHNldEZvY3VzKHRydWUpO1xuICAgIGlmIChvbk1vdXNlRW50ZXIpIG9uTW91c2VFbnRlcihldnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VMZWF2ZShldnQpIHtcbiAgICBzZXRGb2N1cyhmYWxzZSk7XG4gICAgaWYgKGlzUHJlc3NlZCkgc2V0UHJlc3NlZChmYWxzZSk7XG4gICAgaWYgKG9uTW91c2VMZWF2ZSkgb25Nb3VzZUxlYXZlKGV2dCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVGb2N1cyhldnQpIHtcbiAgICBzZXRGb2N1cyh0cnVlKTtcbiAgICBpZiAob25Gb2N1cykgb25Gb2N1cyhldnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQmx1cihldnQpIHtcbiAgICBzZXRGb2N1cyhmYWxzZSk7XG4gICAgaWYgKGlzUHJlc3NlZCkgc2V0UHJlc3NlZChmYWxzZSk7XG4gICAgaWYgKG9uQmx1cikgb25CbHVyKGV2dCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZ0KSB7XG4gICAgc2V0UHJlc3NlZCh0cnVlKTtcbiAgICBpZiAob25Nb3VzZURvd24pIG9uTW91c2VEb3duKGV2dCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKGV2dCkge1xuICAgIHNldFByZXNzZWQoZmFsc2UpO1xuICAgIGlmIChvbk1vdXNlVXApIG9uTW91c2VVcChldnQpO1xuICB9XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIF9leHRlbmRzKHtcbiAgICByb2xlOiBcImdlb2dyYXBoeVwiLFxuICAgIHRhYkluZGV4OiBcIjBcIixcbiAgICBjbGFzc05hbWU6IFwicnNtLWdlb2dyYXBoeSBcIiArIGNsYXNzTmFtZSxcbiAgICBkOiBnZW9ncmFwaHkuc3ZnUGF0aCxcbiAgICBvbk1vdXNlRW50ZXI6IGhhbmRsZU1vdXNlRW50ZXIsXG4gICAgb25Nb3VzZUxlYXZlOiBoYW5kbGVNb3VzZUxlYXZlLFxuICAgIG9uRm9jdXM6IGhhbmRsZUZvY3VzLFxuICAgIG9uQmx1cjogaGFuZGxlQmx1cixcbiAgICBvbk1vdXNlRG93bjogaGFuZGxlTW91c2VEb3duLFxuICAgIG9uTW91c2VVcDogaGFuZGxlTW91c2VVcCxcbiAgICBzdHlsZTogc3R5bGVbaXNQcmVzc2VkIHx8IGlzRm9jdXNlZCA/IGlzUHJlc3NlZCA/IFwicHJlc3NlZFwiIDogXCJob3ZlclwiIDogXCJkZWZhdWx0XCJdXG4gIH0sIHJlc3RQcm9wcykpO1xufTtcblxuR2VvZ3JhcGh5LnByb3BUeXBlcyA9IHtcbiAgZ2VvZ3JhcGh5OiBQcm9wVHlwZXMub2JqZWN0LFxuICBvbk1vdXNlRW50ZXI6IFByb3BUeXBlcy5mdW5jLFxuICBvbk1vdXNlTGVhdmU6IFByb3BUeXBlcy5mdW5jLFxuICBvbk1vdXNlRG93bjogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uTW91c2VVcDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRm9jdXM6IFByb3BUeXBlcy5mdW5jLFxuICBvbkJsdXI6IFByb3BUeXBlcy5mdW5jLFxuICBzdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG52YXIgR2VvZ3JhcGh5JDEgPSBtZW1vKEdlb2dyYXBoeSk7XG5cbnZhciBHcmF0aWN1bGUgPSBmdW5jdGlvbiBHcmF0aWN1bGUoX3JlZikge1xuICB2YXIgX3JlZiRmaWxsID0gX3JlZi5maWxsLFxuICAgICAgZmlsbCA9IF9yZWYkZmlsbCA9PT0gdW5kZWZpbmVkID8gXCJ0cmFuc3BhcmVudFwiIDogX3JlZiRmaWxsLFxuICAgICAgX3JlZiRzdHJva2UgPSBfcmVmLnN0cm9rZSxcbiAgICAgIHN0cm9rZSA9IF9yZWYkc3Ryb2tlID09PSB1bmRlZmluZWQgPyBcImN1cnJlbnRjb2xvclwiIDogX3JlZiRzdHJva2UsXG4gICAgICBfcmVmJHN0ZXAgPSBfcmVmLnN0ZXAsXG4gICAgICBzdGVwID0gX3JlZiRzdGVwID09PSB1bmRlZmluZWQgPyBbMTAsIDEwXSA6IF9yZWYkc3RlcCxcbiAgICAgIF9yZWYkY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmJGNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IF9yZWYkY2xhc3NOYW1lLFxuICAgICAgcmVzdFByb3BzID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wiZmlsbFwiLCBcInN0cm9rZVwiLCBcInN0ZXBcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoTWFwQ29udGV4dCksXG4gICAgICBwYXRoID0gX3VzZUNvbnRleHQucGF0aDtcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgX2V4dGVuZHMoe1xuICAgIGQ6IHBhdGgoZ2VvR3JhdGljdWxlKCkuc3RlcChzdGVwKSgpKSxcbiAgICBmaWxsOiBmaWxsLFxuICAgIHN0cm9rZTogc3Ryb2tlLFxuICAgIGNsYXNzTmFtZTogXCJyc20tZ3JhdGljdWxlIFwiICsgY2xhc3NOYW1lXG4gIH0sIHJlc3RQcm9wcykpO1xufTtcblxuR3JhdGljdWxlLnByb3BUeXBlcyA9IHtcbiAgZmlsbDogUHJvcFR5cGVzLnN0cmluZyxcbiAgc3Ryb2tlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzdGVwOiBQcm9wVHlwZXMuYXJyYXksXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxudmFyIEdyYXRpY3VsZSQxID0gbWVtbyhHcmF0aWN1bGUpO1xuXG5mdW5jdGlvbiB1c2Vab29tUGFuKF9yZWYpIHtcbiAgdmFyIF9yZWYkY2VudGVyID0gX3JlZi5jZW50ZXIsXG4gICAgICBjZW50ZXIgPSBfcmVmJGNlbnRlciA9PT0gdW5kZWZpbmVkID8gWzAsIDBdIDogX3JlZiRjZW50ZXIsXG4gICAgICBfcmVmJHpvb20gPSBfcmVmLnpvb20sXG4gICAgICB6b29tID0gX3JlZiR6b29tID09PSB1bmRlZmluZWQgPyAxIDogX3JlZiR6b29tLFxuICAgICAgX3JlZiRtaW5ab29tID0gX3JlZi5taW5ab29tLFxuICAgICAgbWluWm9vbSA9IF9yZWYkbWluWm9vbSA9PT0gdW5kZWZpbmVkID8gMSA6IF9yZWYkbWluWm9vbSxcbiAgICAgIF9yZWYkbWF4Wm9vbSA9IF9yZWYubWF4Wm9vbSxcbiAgICAgIG1heFpvb20gPSBfcmVmJG1heFpvb20gPT09IHVuZGVmaW5lZCA/IDUgOiBfcmVmJG1heFpvb20sXG4gICAgICBfcmVmJHpvb21TZW5zaXRpdml0eSA9IF9yZWYuem9vbVNlbnNpdGl2aXR5LFxuICAgICAgem9vbVNlbnNpdGl2aXR5ID0gX3JlZiR6b29tU2Vuc2l0aXZpdHkgPT09IHVuZGVmaW5lZCA/IDAuMDI1IDogX3JlZiR6b29tU2Vuc2l0aXZpdHksXG4gICAgICBvblpvb21TdGFydCA9IF9yZWYub25ab29tU3RhcnQsXG4gICAgICBvblpvb21FbmQgPSBfcmVmLm9uWm9vbUVuZCxcbiAgICAgIG9uTW92ZVN0YXJ0ID0gX3JlZi5vbk1vdmVTdGFydCxcbiAgICAgIG9uTW92ZUVuZCA9IF9yZWYub25Nb3ZlRW5kLFxuICAgICAgX3JlZiRkaXNhYmxlUGFubmluZyA9IF9yZWYuZGlzYWJsZVBhbm5pbmcsXG4gICAgICBkaXNhYmxlUGFubmluZyA9IF9yZWYkZGlzYWJsZVBhbm5pbmcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRkaXNhYmxlUGFubmluZyxcbiAgICAgIF9yZWYkZGlzYWJsZVpvb21pbmcgPSBfcmVmLmRpc2FibGVab29taW5nLFxuICAgICAgZGlzYWJsZVpvb21pbmcgPSBfcmVmJGRpc2FibGVab29taW5nID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkZGlzYWJsZVpvb21pbmc7XG5cbiAgdmFyIF91c2VDb250ZXh0ID0gdXNlQ29udGV4dChNYXBDb250ZXh0KSxcbiAgICAgIHdpZHRoID0gX3VzZUNvbnRleHQud2lkdGgsXG4gICAgICBoZWlnaHQgPSBfdXNlQ29udGV4dC5oZWlnaHQsXG4gICAgICBwcm9qZWN0aW9uID0gX3VzZUNvbnRleHQucHJvamVjdGlvbjtcblxuICB2YXIgd2hlZWxUaW1lciA9IHVzZVJlZihudWxsKTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjID0gcHJvamVjdGlvbihjZW50ZXIpO1xuICAgIHJldHVybiB7XG4gICAgICB4OiB3aWR0aCAvIDIgLSBjWzBdICogem9vbSxcbiAgICAgIHk6IGhlaWdodCAvIDIgLSBjWzFdICogem9vbSxcbiAgICAgIGxhc3Q6IFt3aWR0aCAvIDIgLSBjWzBdICogem9vbSwgaGVpZ2h0IC8gMiAtIGNbMV0gKiB6b29tXSxcbiAgICAgIHpvb206IHpvb20sXG4gICAgICBkcmFnZ2luZzogZmFsc2UsXG4gICAgICB6b29taW5nOiBmYWxzZVxuICAgIH07XG4gIH0pLFxuICAgICAgX3VzZVN0YXRlMiA9IHNsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHBvc2l0aW9uID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFBvc2l0aW9uID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgZWxSZWYgPSB1c2VSZWYoKTtcbiAgdmFyIHBvaW50ID0gdXNlUmVmKCk7XG4gIHZhciBpc1BvaW50ZXJEb3duID0gdXNlUmVmKGZhbHNlKTtcbiAgdmFyIHBvaW50ZXJPcmlnaW4gPSB1c2VSZWYoKTtcblxuICBmdW5jdGlvbiBnZXRQb2ludEZyb21FdmVudChldmVudCkge1xuICAgIHZhciBzdmcgPSBlbFJlZi5jdXJyZW50LmNsb3Nlc3QoXCJzdmdcIik7XG4gICAgaWYgKGV2ZW50LnRhcmdldFRvdWNoZXMpIHtcbiAgICAgIHBvaW50LmN1cnJlbnQueCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIHBvaW50LmN1cnJlbnQueSA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9pbnQuY3VycmVudC54ID0gZXZlbnQuY2xpZW50WDtcbiAgICAgIHBvaW50LmN1cnJlbnQueSA9IGV2ZW50LmNsaWVudFk7XG4gICAgfVxuICAgIHZhciBpbnZlcnRlZFNWR01hdHJpeCA9IHN2Zy5nZXRTY3JlZW5DVE0oKS5pbnZlcnNlKCk7XG4gICAgcmV0dXJuIHBvaW50LmN1cnJlbnQubWF0cml4VHJhbnNmb3JtKGludmVydGVkU1ZHTWF0cml4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZXZlbnQpIHtcbiAgICBpZiAoZGlzYWJsZVBhbm5pbmcpIHJldHVybjtcbiAgICBpc1BvaW50ZXJEb3duLmN1cnJlbnQgPSB0cnVlO1xuICAgIHBvaW50ZXJPcmlnaW4uY3VycmVudCA9IGdldFBvaW50RnJvbUV2ZW50KGV2ZW50KTtcbiAgICBzZXRQb3NpdGlvbihmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgIGlmIChvbk1vdmVTdGFydCkgb25Nb3ZlU3RhcnQoZXZlbnQsIF9leHRlbmRzKHt9LCBwb3NpdGlvbiwgeyBkcmFnZ2luZzogdHJ1ZSB9KSk7XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHBvc2l0aW9uLCB7IGRyYWdnaW5nOiB0cnVlIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Qb2ludGVyTW92ZShldmVudCkge1xuICAgIGlmICghaXNQb2ludGVyRG93bi5jdXJyZW50KSByZXR1cm47XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgcG9pbnRlclBvc2l0aW9uID0gZ2V0UG9pbnRGcm9tRXZlbnQoZXZlbnQpO1xuICAgIHNldFBvc2l0aW9uKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBwb3NpdGlvbiwge1xuICAgICAgICB4OiBwb3NpdGlvbi5sYXN0WzBdICsgKHBvaW50ZXJQb3NpdGlvbi54IC0gcG9pbnRlck9yaWdpbi5jdXJyZW50LngpLFxuICAgICAgICB5OiBwb3NpdGlvbi5sYXN0WzFdICsgKHBvaW50ZXJQb3NpdGlvbi55IC0gcG9pbnRlck9yaWdpbi5jdXJyZW50LnkpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUG9pbnRlclVwKGV2ZW50KSB7XG4gICAgaXNQb2ludGVyRG93bi5jdXJyZW50ID0gZmFsc2U7XG4gICAgc2V0UG9zaXRpb24oZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICBpZiAob25Nb3ZlRW5kKSB7XG4gICAgICAgIG9uTW92ZUVuZChldmVudCwgX2V4dGVuZHMoe30sIHBvc2l0aW9uLCB7IGxhc3Q6IFtwb3NpdGlvbi54LCBwb3NpdGlvbi55XSwgZHJhZ2dpbmc6IGZhbHNlIH0pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcG9zaXRpb24sIHtcbiAgICAgICAgbGFzdDogW3Bvc2l0aW9uLngsIHBvc2l0aW9uLnldLFxuICAgICAgICBkcmFnZ2luZzogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlV2hlZWwoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmN0cmxLZXkpIHJldHVybjtcbiAgICBpZiAoZGlzYWJsZVpvb21pbmcpIHJldHVybjtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIHNwZWVkID0gZXZlbnQuZGVsdGFZICogem9vbVNlbnNpdGl2aXR5O1xuXG4gICAgc2V0UG9zaXRpb24oZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICB2YXIgbmV3Wm9vbSA9IHBvc2l0aW9uLnpvb20gLSBzcGVlZDtcbiAgICAgIHZhciB6b29tID0gbmV3Wm9vbSA8IG1pblpvb20gPyBtaW5ab29tIDogbmV3Wm9vbSA+IG1heFpvb20gPyBtYXhab29tIDogbmV3Wm9vbTtcblxuICAgICAgdmFyIHBvaW50ZXJQb3NpdGlvbiA9IGdldFBvaW50RnJvbUV2ZW50KGV2ZW50KTtcblxuICAgICAgdmFyIHggPSAocG9zaXRpb24ueCAtIHBvaW50ZXJQb3NpdGlvbi54KSAqIHpvb20gLyBwb3NpdGlvbi56b29tICsgcG9pbnRlclBvc2l0aW9uLng7XG4gICAgICB2YXIgeSA9IChwb3NpdGlvbi55IC0gcG9pbnRlclBvc2l0aW9uLnkpICogem9vbSAvIHBvc2l0aW9uLnpvb20gKyBwb2ludGVyUG9zaXRpb24ueTtcblxuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh3aGVlbFRpbWVyLmN1cnJlbnQpO1xuICAgICAgd2hlZWxUaW1lci5jdXJyZW50ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFBvc2l0aW9uKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgIGlmIChvblpvb21FbmQpIG9uWm9vbUVuZChldmVudCwgcG9zaXRpb24pO1xuICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcG9zaXRpb24sIHsgem9vbWluZzogZmFsc2UgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgNjYpO1xuXG4gICAgICBpZiAob25ab29tU3RhcnQpIHtcbiAgICAgICAgb25ab29tU3RhcnQoZXZlbnQsIF9leHRlbmRzKHt9LCBwb3NpdGlvbiwge1xuICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgeTogeSxcbiAgICAgICAgICBsYXN0OiBbeCwgeV0sXG4gICAgICAgICAgem9vbTogem9vbSxcbiAgICAgICAgICB6b29taW5nOiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBwb3NpdGlvbiwge1xuICAgICAgICB4OiB4LFxuICAgICAgICB5OiB5LFxuICAgICAgICBsYXN0OiBbeCwgeV0sXG4gICAgICAgIHpvb206IHpvb20sXG4gICAgICAgIHpvb21pbmc6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdXNlTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3ZnID0gZWxSZWYuY3VycmVudC5jbG9zZXN0KFwic3ZnXCIpO1xuICAgIHBvaW50LmN1cnJlbnQgPSBzdmcuY3JlYXRlU1ZHUG9pbnQoKTtcblxuICAgIHN2Zy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgaGFuZGxlV2hlZWwpO1xuXG4gICAgaWYgKHdpbmRvdy5Qb2ludGVyRXZlbnQpIHtcbiAgICAgIHN2Zy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25Qb2ludGVyRG93bik7XG4gICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBvblBvaW50ZXJVcCk7XG4gICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsZWF2ZVwiLCBvblBvaW50ZXJVcCk7XG4gICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG9uUG9pbnRlck1vdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvblBvaW50ZXJEb3duKTtcbiAgICAgIHN2Zy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvblBvaW50ZXJVcCk7XG4gICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgb25Qb2ludGVyVXApO1xuICAgICAgc3ZnLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Qb2ludGVyTW92ZSk7XG4gICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgb25Qb2ludGVyRG93bik7XG4gICAgICBzdmcuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIG9uUG9pbnRlclVwKTtcbiAgICAgIHN2Zy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG9uUG9pbnRlck1vdmUpO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBzdmcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIGhhbmRsZVdoZWVsKTtcbiAgICAgIGlmICh3aW5kb3cuUG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25Qb2ludGVyRG93bik7XG4gICAgICAgIHN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIG9uUG9pbnRlclVwKTtcbiAgICAgICAgc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybGVhdmVcIiwgb25Qb2ludGVyVXApO1xuICAgICAgICBzdmcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG9uUG9pbnRlck1vdmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgb25Qb2ludGVyRG93bik7XG4gICAgICAgIHN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvblBvaW50ZXJVcCk7XG4gICAgICAgIHN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBvblBvaW50ZXJVcCk7XG4gICAgICAgIHN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uUG9pbnRlck1vdmUpO1xuICAgICAgICBzdmcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgb25Qb2ludGVyRG93bik7XG4gICAgICAgIHN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgb25Qb2ludGVyVXApO1xuICAgICAgICBzdmcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvblBvaW50ZXJNb3ZlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXRQb3NpdGlvbihmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgIHZhciB4ID0gKHBvc2l0aW9uLnggLSB3aWR0aCAvIDIpICogem9vbSAvIHBvc2l0aW9uLnpvb20gKyB3aWR0aCAvIDI7XG4gICAgICB2YXIgeSA9IChwb3NpdGlvbi55IC0gaGVpZ2h0IC8gMikgKiB6b29tIC8gcG9zaXRpb24uem9vbSArIGhlaWdodCAvIDI7XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHBvc2l0aW9uLCB7IHg6IHgsIHk6IHksIGxhc3Q6IFt4LCB5XSwgem9vbTogem9vbSB9KTtcbiAgICB9KTtcbiAgfSwgW3pvb21dKTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjID0gcHJvamVjdGlvbihjZW50ZXIpO1xuICAgIHNldFBvc2l0aW9uKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBwb3NpdGlvbiwge1xuICAgICAgICB4OiB3aWR0aCAvIDIgLSBjWzBdICogcG9zaXRpb24uem9vbSxcbiAgICAgICAgeTogaGVpZ2h0IC8gMiAtIGNbMV0gKiBwb3NpdGlvbi56b29tLFxuICAgICAgICBsYXN0OiBbd2lkdGggLyAyIC0gY1swXSAqIHBvc2l0aW9uLnpvb20sIGhlaWdodCAvIDIgLSBjWzFdICogcG9zaXRpb24uem9vbV1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCBbY2VudGVyWzBdLCBjZW50ZXJbMV1dKTtcblxuICByZXR1cm4ge1xuICAgIGVsUmVmOiBlbFJlZixcbiAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgdHJhbnNmb3JtU3RyaW5nOiBcInRyYW5zbGF0ZShcIiArIHBvc2l0aW9uLnggKyBcIiBcIiArIHBvc2l0aW9uLnkgKyBcIikgc2NhbGUoXCIgKyBwb3NpdGlvbi56b29tICsgXCIpXCJcbiAgfTtcbn1cblxudmFyIFpvb21hYmxlR3JvdXAgPSBmdW5jdGlvbiBab29tYWJsZUdyb3VwKF9yZWYpIHtcbiAgdmFyIHJlbmRlciA9IF9yZWYucmVuZGVyLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgX3JlZiRjZW50ZXIgPSBfcmVmLmNlbnRlcixcbiAgICAgIGNlbnRlciA9IF9yZWYkY2VudGVyID09PSB1bmRlZmluZWQgPyBbMCwgMF0gOiBfcmVmJGNlbnRlcixcbiAgICAgIF9yZWYkem9vbSA9IF9yZWYuem9vbSxcbiAgICAgIHpvb20gPSBfcmVmJHpvb20gPT09IHVuZGVmaW5lZCA/IDEgOiBfcmVmJHpvb20sXG4gICAgICBfcmVmJG1pblpvb20gPSBfcmVmLm1pblpvb20sXG4gICAgICBtaW5ab29tID0gX3JlZiRtaW5ab29tID09PSB1bmRlZmluZWQgPyAxIDogX3JlZiRtaW5ab29tLFxuICAgICAgX3JlZiRtYXhab29tID0gX3JlZi5tYXhab29tLFxuICAgICAgbWF4Wm9vbSA9IF9yZWYkbWF4Wm9vbSA9PT0gdW5kZWZpbmVkID8gNSA6IF9yZWYkbWF4Wm9vbSxcbiAgICAgIF9yZWYkem9vbVNlbnNpdGl2aXR5ID0gX3JlZi56b29tU2Vuc2l0aXZpdHksXG4gICAgICB6b29tU2Vuc2l0aXZpdHkgPSBfcmVmJHpvb21TZW5zaXRpdml0eSA9PT0gdW5kZWZpbmVkID8gMC4wMjUgOiBfcmVmJHpvb21TZW5zaXRpdml0eSxcbiAgICAgIG9uWm9vbVN0YXJ0ID0gX3JlZi5vblpvb21TdGFydCxcbiAgICAgIG9uWm9vbUVuZCA9IF9yZWYub25ab29tRW5kLFxuICAgICAgb25Nb3ZlU3RhcnQgPSBfcmVmLm9uTW92ZVN0YXJ0LFxuICAgICAgb25Nb3ZlRW5kID0gX3JlZi5vbk1vdmVFbmQsXG4gICAgICBfcmVmJGRpc2FibGVQYW5uaW5nID0gX3JlZi5kaXNhYmxlUGFubmluZyxcbiAgICAgIGRpc2FibGVQYW5uaW5nID0gX3JlZiRkaXNhYmxlUGFubmluZyA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGRpc2FibGVQYW5uaW5nLFxuICAgICAgX3JlZiRkaXNhYmxlWm9vbWluZyA9IF9yZWYuZGlzYWJsZVpvb21pbmcsXG4gICAgICBkaXNhYmxlWm9vbWluZyA9IF9yZWYkZGlzYWJsZVpvb21pbmcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRkaXNhYmxlWm9vbWluZyxcbiAgICAgIF9yZWYkY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmJGNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IF9yZWYkY2xhc3NOYW1lLFxuICAgICAgcmVzdFByb3BzID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wicmVuZGVyXCIsIFwiY2hpbGRyZW5cIiwgXCJjZW50ZXJcIiwgXCJ6b29tXCIsIFwibWluWm9vbVwiLCBcIm1heFpvb21cIiwgXCJ6b29tU2Vuc2l0aXZpdHlcIiwgXCJvblpvb21TdGFydFwiLCBcIm9uWm9vbUVuZFwiLCBcIm9uTW92ZVN0YXJ0XCIsIFwib25Nb3ZlRW5kXCIsIFwiZGlzYWJsZVBhbm5pbmdcIiwgXCJkaXNhYmxlWm9vbWluZ1wiLCBcImNsYXNzTmFtZVwiXSk7XG5cbiAgdmFyIF91c2Vab29tUGFuID0gdXNlWm9vbVBhbih7XG4gICAgY2VudGVyOiBjZW50ZXIsXG4gICAgem9vbTogem9vbSxcbiAgICBtaW5ab29tOiBtaW5ab29tLFxuICAgIG1heFpvb206IG1heFpvb20sXG4gICAgem9vbVNlbnNpdGl2aXR5OiB6b29tU2Vuc2l0aXZpdHksXG4gICAgb25ab29tU3RhcnQ6IG9uWm9vbVN0YXJ0LFxuICAgIG9uWm9vbUVuZDogb25ab29tRW5kLFxuICAgIG9uTW92ZVN0YXJ0OiBvbk1vdmVTdGFydCxcbiAgICBvbk1vdmVFbmQ6IG9uTW92ZUVuZCxcbiAgICBkaXNhYmxlUGFubmluZzogZGlzYWJsZVBhbm5pbmcsXG4gICAgZGlzYWJsZVpvb21pbmc6IGRpc2FibGVab29taW5nXG4gIH0pLFxuICAgICAgZWxSZWYgPSBfdXNlWm9vbVBhbi5lbFJlZixcbiAgICAgIHBvc2l0aW9uID0gX3VzZVpvb21QYW4ucG9zaXRpb24sXG4gICAgICB0cmFuc2Zvcm1TdHJpbmcgPSBfdXNlWm9vbVBhbi50cmFuc2Zvcm1TdHJpbmc7XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJnXCIsXG4gICAgX2V4dGVuZHMoe1xuICAgICAgcmVmOiBlbFJlZixcbiAgICAgIGNsYXNzTmFtZTogXCJyc20tem9vbWFibGUtZ3JvdXAgXCIgKyBjbGFzc05hbWVcbiAgICB9LCByZXN0UHJvcHMpLFxuICAgIHJlbmRlciA/IHJlbmRlcihwb3NpdGlvbikgOiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJnXCIsXG4gICAgICB7IHRyYW5zZm9ybTogdHJhbnNmb3JtU3RyaW5nIH0sXG4gICAgICBjaGlsZHJlblxuICAgIClcbiAgKTtcbn07XG5cblpvb21hYmxlR3JvdXAucHJvcFR5cGVzID0ge1xuICByZW5kZXI6IFByb3BUeXBlcy5mdW5jLFxuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5ub2RlKV0pLFxuICBjZW50ZXI6IFByb3BUeXBlcy5hcnJheSxcbiAgem9vbTogUHJvcFR5cGVzLm51bWJlcixcbiAgbWluWm9vbTogUHJvcFR5cGVzLm51bWJlcixcbiAgbWF4Wm9vbTogUHJvcFR5cGVzLm51bWJlcixcbiAgem9vbVNlbnNpdGl2aXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICBvblpvb21TdGFydDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uWm9vbUVuZDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uTW92ZVN0YXJ0OiBQcm9wVHlwZXMuZnVuYyxcbiAgb25Nb3ZlRW5kOiBQcm9wVHlwZXMuZnVuYyxcbiAgZGlzYWJsZVBhbm5pbmc6IFByb3BUeXBlcy5ib29sLFxuICBkaXNhYmxlWm9vbWluZzogUHJvcFR5cGVzLmJvb2wsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxudmFyIFNwaGVyZSA9IGZ1bmN0aW9uIFNwaGVyZShfcmVmKSB7XG4gIHZhciBfcmVmJGlkID0gX3JlZi5pZCxcbiAgICAgIGlkID0gX3JlZiRpZCA9PT0gdW5kZWZpbmVkID8gXCJyc20tc3BoZXJlXCIgOiBfcmVmJGlkLFxuICAgICAgX3JlZiRmaWxsID0gX3JlZi5maWxsLFxuICAgICAgZmlsbCA9IF9yZWYkZmlsbCA9PT0gdW5kZWZpbmVkID8gXCJ0cmFuc3BhcmVudFwiIDogX3JlZiRmaWxsLFxuICAgICAgX3JlZiRzdHJva2UgPSBfcmVmLnN0cm9rZSxcbiAgICAgIHN0cm9rZSA9IF9yZWYkc3Ryb2tlID09PSB1bmRlZmluZWQgPyBcImN1cnJlbnRjb2xvclwiIDogX3JlZiRzdHJva2UsXG4gICAgICBfcmVmJHN0cm9rZVdpZHRoID0gX3JlZi5zdHJva2VXaWR0aCxcbiAgICAgIHN0cm9rZVdpZHRoID0gX3JlZiRzdHJva2VXaWR0aCA9PT0gdW5kZWZpbmVkID8gMC41IDogX3JlZiRzdHJva2VXaWR0aCxcbiAgICAgIF9yZWYkY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmJGNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IF9yZWYkY2xhc3NOYW1lLFxuICAgICAgcmVzdFByb3BzID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wiaWRcIiwgXCJmaWxsXCIsIFwic3Ryb2tlXCIsIFwic3Ryb2tlV2lkdGhcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoTWFwQ29udGV4dCksXG4gICAgICBwYXRoID0gX3VzZUNvbnRleHQucGF0aDtcblxuICB2YXIgc3BoZXJlUGF0aCA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwYXRoKHsgdHlwZTogXCJTcGhlcmVcIiB9KTtcbiAgfSwgW3BhdGhdKTtcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgRnJhZ21lbnQsXG4gICAgbnVsbCxcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkZWZzXCIsXG4gICAgICBudWxsLFxuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICAgICAgXCJjbGlwUGF0aFwiLFxuICAgICAgICB7IGlkOiBpZCB9LFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IHNwaGVyZVBhdGggfSlcbiAgICAgIClcbiAgICApLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIF9leHRlbmRzKHtcbiAgICAgIGQ6IHNwaGVyZVBhdGgsXG4gICAgICBmaWxsOiBmaWxsLFxuICAgICAgc3Ryb2tlOiBzdHJva2UsXG4gICAgICBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsXG4gICAgICBzdHlsZTogeyBwb2ludGVyRXZlbnRzOiBcIm5vbmVcIiB9LFxuICAgICAgY2xhc3NOYW1lOiBcInJzbS1zcGhlcmUgXCIgKyBjbGFzc05hbWVcbiAgICB9LCByZXN0UHJvcHMpKVxuICApO1xufTtcblxuU3BoZXJlLnByb3BUeXBlcyA9IHtcbiAgaWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZpbGw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHN0cm9rZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgc3Ryb2tlV2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxudmFyIFNwaGVyZSQxID0gbWVtbyhTcGhlcmUpO1xuXG52YXIgTWFya2VyID0gZnVuY3Rpb24gTWFya2VyKF9yZWYpIHtcbiAgdmFyIGNvb3JkaW5hdGVzID0gX3JlZi5jb29yZGluYXRlcyxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIG9uTW91c2VFbnRlciA9IF9yZWYub25Nb3VzZUVudGVyLFxuICAgICAgb25Nb3VzZUxlYXZlID0gX3JlZi5vbk1vdXNlTGVhdmUsXG4gICAgICBvbk1vdXNlRG93biA9IF9yZWYub25Nb3VzZURvd24sXG4gICAgICBvbk1vdXNlVXAgPSBfcmVmLm9uTW91c2VVcCxcbiAgICAgIG9uRm9jdXMgPSBfcmVmLm9uRm9jdXMsXG4gICAgICBvbkJsdXIgPSBfcmVmLm9uQmx1cixcbiAgICAgIF9yZWYkc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgc3R5bGUgPSBfcmVmJHN0eWxlID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkc3R5bGUsXG4gICAgICBfcmVmJGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZiRjbGFzc05hbWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBfcmVmJGNsYXNzTmFtZSxcbiAgICAgIHJlc3RQcm9wcyA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImNvb3JkaW5hdGVzXCIsIFwiY2hpbGRyZW5cIiwgXCJvbk1vdXNlRW50ZXJcIiwgXCJvbk1vdXNlTGVhdmVcIiwgXCJvbk1vdXNlRG93blwiLCBcIm9uTW91c2VVcFwiLCBcIm9uRm9jdXNcIiwgXCJvbkJsdXJcIiwgXCJzdHlsZVwiLCBcImNsYXNzTmFtZVwiXSk7XG5cbiAgdmFyIF91c2VDb250ZXh0ID0gdXNlQ29udGV4dChNYXBDb250ZXh0KSxcbiAgICAgIHByb2plY3Rpb24gPSBfdXNlQ29udGV4dC5wcm9qZWN0aW9uO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBfdXNlU3RhdGUyID0gc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgaXNQcmVzc2VkID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFByZXNzZWQgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX3VzZVN0YXRlNCA9IHNsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBpc0ZvY3VzZWQgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0Rm9jdXMgPSBfdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBfcHJvamVjdGlvbiA9IHByb2plY3Rpb24oY29vcmRpbmF0ZXMpLFxuICAgICAgX3Byb2plY3Rpb24yID0gc2xpY2VkVG9BcnJheShfcHJvamVjdGlvbiwgMiksXG4gICAgICB4ID0gX3Byb2plY3Rpb24yWzBdLFxuICAgICAgeSA9IF9wcm9qZWN0aW9uMlsxXTtcblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZUVudGVyKGV2dCkge1xuICAgIHNldEZvY3VzKHRydWUpO1xuICAgIGlmIChvbk1vdXNlRW50ZXIpIG9uTW91c2VFbnRlcihldnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTW91c2VMZWF2ZShldnQpIHtcbiAgICBzZXRGb2N1cyhmYWxzZSk7XG4gICAgaWYgKGlzUHJlc3NlZCkgc2V0UHJlc3NlZChmYWxzZSk7XG4gICAgaWYgKG9uTW91c2VMZWF2ZSkgb25Nb3VzZUxlYXZlKGV2dCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVGb2N1cyhldnQpIHtcbiAgICBzZXRGb2N1cyh0cnVlKTtcbiAgICBpZiAob25Gb2N1cykgb25Gb2N1cyhldnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQmx1cihldnQpIHtcbiAgICBzZXRGb2N1cyhmYWxzZSk7XG4gICAgaWYgKGlzUHJlc3NlZCkgc2V0UHJlc3NlZChmYWxzZSk7XG4gICAgaWYgKG9uQmx1cikgb25CbHVyKGV2dCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZXZ0KSB7XG4gICAgc2V0UHJlc3NlZCh0cnVlKTtcbiAgICBpZiAob25Nb3VzZURvd24pIG9uTW91c2VEb3duKGV2dCk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZVVwKGV2dCkge1xuICAgIHNldFByZXNzZWQoZmFsc2UpO1xuICAgIGlmIChvbk1vdXNlVXApIG9uTW91c2VVcChldnQpO1xuICB9XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJnXCIsXG4gICAgX2V4dGVuZHMoe1xuICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZShcIiArIHggKyBcIiwgXCIgKyB5ICsgXCIpXCIsXG4gICAgICBjbGFzc05hbWU6IFwicnNtLW1hcmtlciBcIiArIGNsYXNzTmFtZSxcbiAgICAgIG9uTW91c2VFbnRlcjogaGFuZGxlTW91c2VFbnRlcixcbiAgICAgIG9uTW91c2VMZWF2ZTogaGFuZGxlTW91c2VMZWF2ZSxcbiAgICAgIG9uRm9jdXM6IGhhbmRsZUZvY3VzLFxuICAgICAgb25CbHVyOiBoYW5kbGVCbHVyLFxuICAgICAgb25Nb3VzZURvd246IGhhbmRsZU1vdXNlRG93bixcbiAgICAgIG9uTW91c2VVcDogaGFuZGxlTW91c2VVcCxcbiAgICAgIHN0eWxlOiBzdHlsZVtpc1ByZXNzZWQgfHwgaXNGb2N1c2VkID8gaXNQcmVzc2VkID8gXCJwcmVzc2VkXCIgOiBcImhvdmVyXCIgOiBcImRlZmF1bHRcIl1cbiAgICB9LCByZXN0UHJvcHMpLFxuICAgIGNoaWxkcmVuXG4gICk7XG59O1xuXG5NYXJrZXIucHJvcFR5cGVzID0ge1xuICBjb29yZGluYXRlczogUHJvcFR5cGVzLmFycmF5LFxuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5ub2RlKV0pLFxuICBvbk1vdXNlRW50ZXI6IFByb3BUeXBlcy5mdW5jLFxuICBvbk1vdXNlTGVhdmU6IFByb3BUeXBlcy5mdW5jLFxuICBvbk1vdXNlRG93bjogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uTW91c2VVcDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRm9jdXM6IFByb3BUeXBlcy5mdW5jLFxuICBvbkJsdXI6IFByb3BUeXBlcy5mdW5jLFxuICBzdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG52YXIgTGluZSA9IGZ1bmN0aW9uIExpbmUoX3JlZikge1xuICB2YXIgX3JlZiRmcm9tID0gX3JlZi5mcm9tLFxuICAgICAgZnJvbSA9IF9yZWYkZnJvbSA9PT0gdW5kZWZpbmVkID8gWzAsIDBdIDogX3JlZiRmcm9tLFxuICAgICAgX3JlZiR0byA9IF9yZWYudG8sXG4gICAgICB0byA9IF9yZWYkdG8gPT09IHVuZGVmaW5lZCA/IFswLCAwXSA6IF9yZWYkdG8sXG4gICAgICBjb29yZGluYXRlcyA9IF9yZWYuY29vcmRpbmF0ZXMsXG4gICAgICBfcmVmJHN0cm9rZSA9IF9yZWYuc3Ryb2tlLFxuICAgICAgc3Ryb2tlID0gX3JlZiRzdHJva2UgPT09IHVuZGVmaW5lZCA/IFwiY3VycmVudGNvbG9yXCIgOiBfcmVmJHN0cm9rZSxcbiAgICAgIF9yZWYkc3Ryb2tlV2lkdGggPSBfcmVmLnN0cm9rZVdpZHRoLFxuICAgICAgc3Ryb2tlV2lkdGggPSBfcmVmJHN0cm9rZVdpZHRoID09PSB1bmRlZmluZWQgPyAzIDogX3JlZiRzdHJva2VXaWR0aCxcbiAgICAgIF9yZWYkZmlsbCA9IF9yZWYuZmlsbCxcbiAgICAgIGZpbGwgPSBfcmVmJGZpbGwgPT09IHVuZGVmaW5lZCA/IFwidHJhbnNwYXJlbnRcIiA6IF9yZWYkZmlsbCxcbiAgICAgIF9yZWYkY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmJGNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IF9yZWYkY2xhc3NOYW1lLFxuICAgICAgcmVzdFByb3BzID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wiZnJvbVwiLCBcInRvXCIsIFwiY29vcmRpbmF0ZXNcIiwgXCJzdHJva2VcIiwgXCJzdHJva2VXaWR0aFwiLCBcImZpbGxcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoTWFwQ29udGV4dCksXG4gICAgICBwYXRoID0gX3VzZUNvbnRleHQucGF0aDtcblxuICB2YXIgbGluZURhdGEgPSB7XG4gICAgdHlwZTogXCJMaW5lU3RyaW5nXCIsXG4gICAgY29vcmRpbmF0ZXM6IGNvb3JkaW5hdGVzIHx8IFtmcm9tLCB0b11cbiAgfTtcblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgX2V4dGVuZHMoe1xuICAgIGQ6IHBhdGgobGluZURhdGEpLFxuICAgIGNsYXNzTmFtZTogXCJyc20tbGluZSBcIiArIGNsYXNzTmFtZSxcbiAgICBzdHJva2U6IHN0cm9rZSxcbiAgICBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsXG4gICAgZmlsbDogZmlsbFxuICB9LCByZXN0UHJvcHMpKTtcbn07XG5cbkxpbmUucHJvcFR5cGVzID0ge1xuICBmcm9tOiBQcm9wVHlwZXMuYXJyYXksXG4gIHRvOiBQcm9wVHlwZXMuYXJyYXksXG4gIGNvb3JkaW5hdGVzOiBQcm9wVHlwZXMuYXJyYXksXG4gIHN0cm9rZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgc3Ryb2tlV2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGZpbGw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxudmFyIEFubm90YXRpb24gPSBmdW5jdGlvbiBBbm5vdGF0aW9uKF9yZWYpIHtcbiAgdmFyIHN1YmplY3QgPSBfcmVmLnN1YmplY3QsXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBjb25uZWN0b3JQcm9wcyA9IF9yZWYuY29ubmVjdG9yUHJvcHMsXG4gICAgICBfcmVmJGR4ID0gX3JlZi5keCxcbiAgICAgIGR4ID0gX3JlZiRkeCA9PT0gdW5kZWZpbmVkID8gMzAgOiBfcmVmJGR4LFxuICAgICAgX3JlZiRkeSA9IF9yZWYuZHksXG4gICAgICBkeSA9IF9yZWYkZHkgPT09IHVuZGVmaW5lZCA/IDMwIDogX3JlZiRkeSxcbiAgICAgIF9yZWYkY3VydmUgPSBfcmVmLmN1cnZlLFxuICAgICAgY3VydmUgPSBfcmVmJGN1cnZlID09PSB1bmRlZmluZWQgPyAwIDogX3JlZiRjdXJ2ZSxcbiAgICAgIF9yZWYkY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmJGNsYXNzTmFtZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IF9yZWYkY2xhc3NOYW1lLFxuICAgICAgcmVzdFByb3BzID0gb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wic3ViamVjdFwiLCBcImNoaWxkcmVuXCIsIFwiY29ubmVjdG9yUHJvcHNcIiwgXCJkeFwiLCBcImR5XCIsIFwiY3VydmVcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHZhciBfdXNlQ29udGV4dCA9IHVzZUNvbnRleHQoTWFwQ29udGV4dCksXG4gICAgICBwcm9qZWN0aW9uID0gX3VzZUNvbnRleHQucHJvamVjdGlvbjtcblxuICB2YXIgX3Byb2plY3Rpb24gPSBwcm9qZWN0aW9uKHN1YmplY3QpLFxuICAgICAgX3Byb2plY3Rpb24yID0gc2xpY2VkVG9BcnJheShfcHJvamVjdGlvbiwgMiksXG4gICAgICB4ID0gX3Byb2plY3Rpb24yWzBdLFxuICAgICAgeSA9IF9wcm9qZWN0aW9uMlsxXTtcblxuICB2YXIgY29ubmVjdG9yUGF0aCA9IGNyZWF0ZUNvbm5lY3RvclBhdGgoZHgsIGR5LCBjdXJ2ZSk7XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgXCJnXCIsXG4gICAgX2V4dGVuZHMoe1xuICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZShcIiArICh4ICsgZHgpICsgXCIsIFwiICsgKHkgKyBkeSkgKyBcIilcIixcbiAgICAgIGNsYXNzTmFtZTogXCJyc20tYW5ub3RhdGlvbiBcIiArIGNsYXNzTmFtZVxuICAgIH0sIHJlc3RQcm9wcyksXG4gICAgUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgX2V4dGVuZHMoeyBkOiBjb25uZWN0b3JQYXRoLCBmaWxsOiBcInRyYW5zcGFyZW50XCIsIHN0cm9rZTogXCIjMDAwXCIgfSwgY29ubmVjdG9yUHJvcHMpKSxcbiAgICBjaGlsZHJlblxuICApO1xufTtcblxuQW5ub3RhdGlvbi5wcm9wVHlwZXMgPSB7XG4gIHN1YmplY3Q6IFByb3BUeXBlcy5hcnJheSxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ub2RlLCBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubm9kZSldKSxcbiAgZHg6IFByb3BUeXBlcy5udW1iZXIsXG4gIGR5OiBQcm9wVHlwZXMubnVtYmVyLFxuICBjdXJ2ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgY29ubmVjdG9yUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxuZXhwb3J0IHsgQW5ub3RhdGlvbiwgQ29tcG9zYWJsZU1hcCwgR2VvZ3JhcGhpZXMsIEdlb2dyYXBoeSQxIGFzIEdlb2dyYXBoeSwgR3JhdGljdWxlJDEgYXMgR3JhdGljdWxlLCBMaW5lLCBNYXJrZXIsIFNwaGVyZSQxIGFzIFNwaGVyZSwgWm9vbWFibGVHcm91cCwgdXNlR2VvZ3JhcGhpZXMsIHVzZVpvb21QYW4gfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-simple-maps/dist/index.es.js\n");

/***/ })

};
;